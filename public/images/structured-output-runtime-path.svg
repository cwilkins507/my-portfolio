<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 880 280" font-family="system-ui, -apple-system, sans-serif">
  <style>
    text { font-size: 14px; fill: #374151; }
    .title { font-size: 18px; font-weight: 700; fill: #1e40af; }
    .zone-label { font-size: 12px; font-weight: 600; }
    .step-num { font-size: 11px; fill: #9ca3af; font-weight: 600; }
  </style>

  <!-- Title -->
  <text x="440" y="26" text-anchor="middle" class="title">Validator-First Runtime Path</text>

  <!-- ========== ZONE BACKGROUNDS ========== -->

  <!-- Untrusted zone (boxes 1-3) -->
  <rect x="20" y="42" width="530" height="175" rx="12" fill="#fff7ed" stroke="#c2410c" stroke-width="1.5" stroke-dasharray="8,4" opacity="0.6"/>
  <text x="285" y="204" text-anchor="middle" class="zone-label" fill="#c2410c">UNTRUSTED — reject here, not downstream</text>

  <!-- Trusted zone (boxes 4-5) -->
  <rect x="570" y="42" width="290" height="175" rx="12" fill="#f0fdf4" stroke="#15803d" stroke-width="1.5" stroke-dasharray="8,4" opacity="0.6"/>
  <text x="715" y="204" text-anchor="middle" class="zone-label" fill="#15803d">TRUSTED</text>

  <!-- ========== PIPELINE BOXES (all same height, y=80, h=50) ========== -->

  <!-- Box 1: Generate -->
  <text x="90" y="72" text-anchor="middle" class="step-num">1</text>
  <rect x="35" y="80" width="110" height="50" rx="8" fill="#dbeafe" stroke="#1e40af" stroke-width="2"/>
  <text x="90" y="101" text-anchor="middle" font-weight="600" fill="#1e40af">Generate</text>
  <text x="90" y="118" text-anchor="middle" font-size="11" fill="#6b7280">(LLM call)</text>

  <!-- Arrow 1→2 -->
  <line x1="145" y1="105" x2="175" y2="105" stroke="#374151" stroke-width="2"/>
  <polygon points="183,105 173,99 173,111" fill="#374151"/>

  <!-- Box 2: Parse JSON -->
  <text x="238" y="72" text-anchor="middle" class="step-num">2</text>
  <rect x="183" y="80" width="110" height="50" rx="8" fill="#dbeafe" stroke="#1e40af" stroke-width="2"/>
  <text x="238" y="110" text-anchor="middle" font-weight="600" fill="#1e40af">Parse JSON</text>

  <!-- Arrow 2→3 -->
  <line x1="293" y1="105" x2="323" y2="105" stroke="#374151" stroke-width="2"/>
  <polygon points="331,105 321,99 321,111" fill="#374151"/>

  <!-- Box 3: Validate -->
  <text x="420" y="72" text-anchor="middle" class="step-num">3</text>
  <rect x="331" y="80" width="178" height="50" rx="8" fill="#dbeafe" stroke="#1e40af" stroke-width="2"/>
  <text x="420" y="101" text-anchor="middle" font-weight="600" fill="#1e40af">Validate</text>
  <text x="420" y="118" text-anchor="middle" font-size="11" fill="#6b7280">schema + semantics</text>

  <!-- Reject arrow (dashed, down from validate box) -->
  <line x1="420" y1="130" x2="420" y2="168" stroke="#dc2626" stroke-width="1.5" stroke-dasharray="4,3"/>
  <polygon points="420,175 415,167 425,167" fill="#dc2626"/>
  <text x="420" y="190" text-anchor="middle" font-size="11" fill="#dc2626" font-weight="600">Reject / Retry</text>

  <!-- Arrow 3→4 -->
  <line x1="509" y1="105" x2="593" y2="105" stroke="#374151" stroke-width="2"/>
  <polygon points="601,105 591,99 591,111" fill="#374151"/>

  <!-- Box 4: Store Event -->
  <text x="656" y="72" text-anchor="middle" class="step-num">4</text>
  <rect x="601" y="80" width="110" height="50" rx="8" fill="#d1fae5" stroke="#15803d" stroke-width="2"/>
  <text x="656" y="110" text-anchor="middle" font-weight="600" fill="#15803d">Store Event</text>

  <!-- Arrow 4→5 -->
  <line x1="711" y1="105" x2="741" y2="105" stroke="#374151" stroke-width="2"/>
  <polygon points="749,105 739,99 739,111" fill="#374151"/>

  <!-- Box 5: Act on Result -->
  <text x="800" y="72" text-anchor="middle" class="step-num">5</text>
  <rect x="749" y="80" width="102" height="50" rx="8" fill="#d1fae5" stroke="#15803d" stroke-width="2"/>
  <text x="800" y="110" text-anchor="middle" font-weight="600" fill="#15803d">Act on Result</text>

  <!-- Zone boundary line (visual separator between untrusted and trusted) -->
  <line x1="558" y1="55" x2="558" y2="210" stroke="#9ca3af" stroke-width="1" stroke-dasharray="3,3" opacity="0.5"/>
</svg>
