---
import Layout from '../layouts/Layout.astro';
import ArticleList from '../components/Articles';
import AnimatedHero from '../components/AnimatedHero';
import GlowDivider from '../components/GlowDivider';
import NavigationWrapper from '../components/NavigationWrapper';

const articlesRaw = await Astro.glob('../articles/*.md');
const articles = articlesRaw.map(article => ({
  slug: article.file.split('/').pop().replace('.md', ''),
  ...article.frontmatter,
})).sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());

const websiteSchema = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Collin Wilkins",
  "url": "https://collinwilkins.com",
  "description": "Technical articles on Python automation, AWS serverless architecture, AI integration, and building systems that deliver measurable business value.",
  "author": {
    "@type": "Person",
    "name": "Collin Wilkins",
    "url": "https://collinwilkins.com/about"
  }
};

const personSchema = {
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Collin Wilkins",
  "jobTitle": "Lead Software Engineer & AI Automation Consultant",
  "description": "Lead Engineer with 12 years of experience in automation, Python, AWS, and AI integration. Ex-Ford, Morningstar.",
  "url": "https://collinwilkins.com",
  "sameAs": [
    "https://www.linkedin.com/in/collin-wilkins-1020215a/",
    "https://github.com/cwilkins507",
    "https://www.upwork.com/freelancers/~014ffbc17b83da9407"
  ],
  "knowsAbout": [
    "Python",
    "AWS",
    "AI Automation",
    "Serverless Architecture",
    "Software Engineering",
    "IoT",
    "AI Agents"
  ],
  "alumniOf": [
    {
      "@type": "Organization",
      "name": "Ford Motor Company"
    },
    {
      "@type": "Organization",
      "name": "Morningstar"
    }
  ]
};
---

<Layout
  title="Collin Wilkins | Lead Engineer & AI Automation Consultant"
  description="I build automations that turn $2M problems into solved problems. Lead Engineer with 12 years of experience in automation, Python, AWS, and AI integration. Ex-Ford, Morningstar."
  schema={[websiteSchema, personSchema]}
>
	<!-- Override Navigation to include SearchOverlay -->
	<NavigationWrapper articles={articles} client:load />

	<!-- 1. Hero Section -->
	<AnimatedHero
		headline="I Help Small Teams Stop Drowning in Manual Work"
		subheadline="I'm Collin — I spent years building automation at Ford and Morningstar. Now I help small teams do the same thing without the enterprise budget. Below are my articles, what I'm building, and how to work with me."
		ctas={[
			{ href: '/services', text: 'Work With Me', variant: 'primary' },
			{ href: '#articles', text: 'Read My Articles', variant: 'secondary' }
		]}
		showNewsletter={true}
		client:load
	/>

	<!-- 2. Glow Divider -->
	<GlowDivider />

	<!-- 3. Currently Building Section (FiNimbus) -->
	<section class="py-16 md:py-24 max-w-4xl mx-auto px-4">
		<div
			class="rounded-2xl p-8 md:p-12 text-center border transition-all duration-300 hover:bg-[rgba(255,255,255,0.05)] hover:border-[rgba(255,255,255,0.12)] hover:shadow-[0_8px_32px_rgba(20,184,166,0.1)] will-change-transform"
			style="background: rgba(255, 255, 255, 0.03); border-color: rgba(255, 255, 255, 0.06);"
		>
			<div class="text-xs uppercase tracking-widest text-moonlight-text-faint mb-4">Currently Building</div>
			<h3 class="text-2xl md:text-3xl font-serif font-semibold text-moonlight-text-primary mb-3">
				<span class="text-teal-400">FiNimbus</span> — AI-powered CFO for small businesses.
			</h3>
			<p class="text-moonlight-text-secondary text-base leading-relaxed mb-6 max-w-2xl mx-auto">
				Translates your financial statements into the key drivers that actually matter—the same ones I watched separate thriving dealerships from struggling ones at Ford Credit. Financial clarity, instantly.
			</p>
			<a
				href="https://finimbus.com"
				target="_blank"
				rel="noopener noreferrer"
				class="text-teal-400 hover:text-teal-300 transition-colors font-medium inline-flex items-center gap-2"
			>
				→ finimbus.com
			</a>
		</div>
	</section>

	<!-- 7. All Articles Section -->
	<section id="articles" class="py-16">
		<ArticleList articles={articles} client:load />
		<!-- Server-rendered article links for SEO crawlers -->
		<noscript>
			<div class="container mx-auto px-4 py-16">
				<h2 class="text-2xl font-serif font-bold text-white mb-8">All Articles</h2>
				<ul class="space-y-4">
					{articles.map(article => (
						<li>
							<a href={`/articles/${article.slug}`} class="text-teal-400 hover:text-teal-300 text-lg">
								{article.title}
							</a>
							<p class="text-zinc-500 text-sm">{article.date}</p>
						</li>
					))}
				</ul>
			</div>
		</noscript>
	</section>

</Layout>
